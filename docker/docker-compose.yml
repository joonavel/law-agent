version: '3.8'

services:
  law-agent:
    build:
      context: ../
      dockerfile: docker/Dockerfile
    container_name: law-agent
    volumes:
      - ../src:/app/src
      - ../data:/app/data
      - ../scripts:/app/scripts
      - ../.env:/app/.env
    environment:
      - DISPLAY=:99
      - PYTHONPATH=/app
    networks:
      - law-agent-network
    command: >
      bash -c "
        echo 'ğŸš€ Law Agent ì‹œì‘...' &&
        echo 'ğŸ“Š Chrome ë²„ì „ í™•ì¸:' &&
        google-chrome --version &&
        echo 'ğŸ”§ ChromeDriver ë²„ì „ í™•ì¸:' &&
        chromedriver --version &&
        echo 'ğŸ”„ ë²•ë ¹ ë¬¸ì„œ ì²˜ë¦¬ ë° ì„ë² ë”© ì‹¤í–‰...' &&
        python scripts/process_documents_and_embed.py
      "

networks:
  law-agent-network:
    driver: bridge
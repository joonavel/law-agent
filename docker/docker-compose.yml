version: '3.8'

services:
  law-agent:
    build:
      context: ../
      dockerfile: docker/Dockerfile
    container_name: law-agent
    volumes:
      - ../src:/app/src
      - ../data:/app/data
      - ../scripts:/app/scripts
      - ../.env:/app/.env
    environment:
      - DISPLAY=:99
      - PYTHONPATH=/app
    networks:
      - law-agent-network
    command: >
      bash -c "
        echo 'ğŸš€ Law Agent í†µí•© ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ì‹œì‘...' &&
        echo 'ğŸ“Š Chrome ë²„ì „ í™•ì¸:' &&
        google-chrome --version &&
        echo 'ğŸ”§ ChromeDriver ë²„ì „ í™•ì¸:' &&
        chromedriver --version &&
        echo 'ğŸ”„ í†µí•© ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ì‹¤í–‰...' &&
        python scripts/test_integrated_workflow.py
      "

networks:
  law-agent-network:
    driver: bridge